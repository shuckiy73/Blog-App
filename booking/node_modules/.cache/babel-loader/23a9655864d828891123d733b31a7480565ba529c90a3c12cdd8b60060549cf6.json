{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import BriefItemCard from\"./BriefItemCard\";import NavigateHeader from\"../General page/NavigateHeader\";import Footer from\"../General page/Footer\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Search=()=>{const API_URL_SEARCH=\"http://127.0.0.1:8000/api/v1/search/?search=\";const[isStartSearch,setStartSearch]=useState(false);const[searchData,setSearchData]=useState([]);const[inputData,setInputData]=useState(\"\");const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const RunSearch=async()=>{try{setLoading(true);setError(null);const data_input_location=document.getElementById(\"input_search_location\").value;const data_input_datetime_check_in=document.getElementById(\"input_search_datetime_check-in\").value;const data_input_datetime_departure=document.getElementById(\"input_search_datetime_departure\").value;setInputData(data_input_location);const headers={'Accept':'*/*'};const response=await axios.get(`${API_URL_SEARCH}${data_input_location}&arrive=${data_input_datetime_check_in}&departure=${data_input_datetime_departure}`,{headers});setSearchData(response.data.results);setStartSearch(true);}catch(err){console.error(\"Ошибка при выполнении поиска:\",err);setError(\"Произошла ошибка при выполнении поиска. Пожалуйста, попробуйте снова.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(NavigateHeader,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container flex-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card bg-light text-white rounded-5\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/image/background/search_background.jpg\",className:\"card-img img-fluid rounded-5\",alt:\"...\",style:{maxWidth:1250}}),/*#__PURE__*/_jsx(\"div\",{className:\"card-img-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"Search_bar\",className:\"flex-auto\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"display-2 fs-0 fw-bold text-center\",children:\"\\u041D\\u0430\\u0439\\u0434\\u0451\\u043C, \\u0433\\u0434\\u0435 \\u043E\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\\u0441\\u044F!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"lead text-center fs-3\",children:\"\\u041A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440\\u044B, \\u043E\\u0442\\u0435\\u043B\\u0438, \\u0433\\u043E\\u0441\\u0442\\u0435\\u0432\\u044B\\u0435 \\u0434\\u043E\\u043C\\u0430 \\u2014 280 \\u0442\\u044B\\u0441\\u044F\\u0447 \\u0432\\u0430\\u0440\\u0438\\u0430\\u043D\\u0442\\u043E\\u0432 \\u0434\\u043B\\u044F \\u043F\\u043E\\u0435\\u0437\\u0434\\u043E\\u043A \\u043F\\u043E \\u0420\\u043E\\u0441\\u0441\\u0438\\u0438 \\u0438 \\u0437\\u0430\\u0440\\u0443\\u0431\\u0435\\u0436\\u044C\\u044E\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-5 flex-auto\",style:{width:950,margin:\"auto\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg input-font-size-lg\",placeholder:\"\\u041A\\u0443\\u0440\\u043E\\u0440\\u0442, \\u0433\\u043E\\u0440\\u043E\\u0434 \\u0438\\u043B\\u0438 \\u0430\\u0434\\u0440\\u0435\\u0441\",\"aria-label\":\"\\u041A\\u0443\\u0440\\u043E\\u0440\\u0442, \\u0433\\u043E\\u0440\\u043E\\u0434 \\u0438\\u043B\\u0438 \\u0430\\u0434\\u0440\\u0435\\u0441\",\"aria-describedby\":\"button-addon2\",id:\"input_search_location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control form-control-lg input-font-size-lg\",\"aria-label\":\"\\u0414\\u0430\\u0442\\u0430 \\u0437\\u0430\\u0441\\u0435\\u043B\\u0435\\u043D\\u0438\\u044F\",\"aria-describedby\":\"button-addon2\",id:\"input_search_datetime_check-in\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control form-control-lg input-font-size-lg\",\"aria-label\":\"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u0442\\u044A\\u0435\\u0437\\u0434\\u0430\",\"aria-describedby\":\"button-addon2\",id:\"input_search_datetime_departure\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",type:\"button\",id:\"button-addon2\",onClick:RunSearch,children:\"\\u041D\\u0430\\u0439\\u0442\\u0438...\"})]})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[loading&&/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),!loading&&!error&&/*#__PURE__*/_jsx(\"span\",{className:\"h4\",children:searchData.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\u041D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E \\u0441\\u043E\\u0432\\u043F\\u0430\\u0434\\u0435\\u043D\\u0438\\u0439: \",searchData.length,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u041F\\u043E \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443: \\\"\",inputData,\"\\\" \",/*#__PURE__*/_jsx(\"br\",{}),searchData.map(item=>/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(BriefItemCard,{item:item})},item.id))]}):isStartSearch?`По указанным параметрам поиска: \"${inputData}\" - данных не найдено!`:\"\"})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default Search;","map":{"version":3,"names":["React","useState","axios","BriefItemCard","NavigateHeader","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Search","API_URL_SEARCH","isStartSearch","setStartSearch","searchData","setSearchData","inputData","setInputData","loading","setLoading","error","setError","RunSearch","data_input_location","document","getElementById","value","data_input_datetime_check_in","data_input_datetime_departure","headers","response","get","data","results","err","console","className","children","src","alt","style","maxWidth","id","width","margin","type","placeholder","onClick","length","map","item"],"sources":["K:/ARENDA/Booking_arenda/booking/src/Components/Search/SearchObjects.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport BriefItemCard from \"./BriefItemCard\";\r\nimport NavigateHeader from \"../General page/NavigateHeader\";\r\nimport Footer from \"../General page/Footer\";\r\n\r\nconst Search = () => {\r\n    const API_URL_SEARCH = \"http://127.0.0.1:8000/api/v1/search/?search=\";\r\n    const [isStartSearch, setStartSearch] = useState(false);\r\n    const [searchData, setSearchData] = useState([]);\r\n    const [inputData, setInputData] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const RunSearch = async () => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const data_input_location = document.getElementById(\"input_search_location\").value;\r\n            const data_input_datetime_check_in = document.getElementById(\"input_search_datetime_check-in\").value;\r\n            const data_input_datetime_departure = document.getElementById(\"input_search_datetime_departure\").value;\r\n\r\n            setInputData(data_input_location);\r\n\r\n            const headers = {\r\n                'Accept': '*/*',\r\n            };\r\n\r\n            const response = await axios.get(\r\n                `${API_URL_SEARCH}${data_input_location}&arrive=${data_input_datetime_check_in}&departure=${data_input_datetime_departure}`,\r\n                { headers }\r\n            );\r\n\r\n            setSearchData(response.data.results);\r\n            setStartSearch(true);\r\n        } catch (err) {\r\n            console.error(\"Ошибка при выполнении поиска:\", err);\r\n            setError(\"Произошла ошибка при выполнении поиска. Пожалуйста, попробуйте снова.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <NavigateHeader />\r\n            <div className=\"container flex-auto\">\r\n                <div className=\"card bg-light text-white rounded-5\">\r\n                    <img\r\n                        src=\"/image/background/search_background.jpg\"\r\n                        className=\"card-img img-fluid rounded-5\"\r\n                        alt=\"...\"\r\n                        style={{ maxWidth: 1250 }}\r\n                    />\r\n                    <div className=\"card-img-overlay\">\r\n                        <div id=\"Search_bar\" className=\"flex-auto\">\r\n                            <br />\r\n                            <p className=\"display-2 fs-0 fw-bold text-center\">Найдём, где остановиться!</p>\r\n                            <br />\r\n                            <br />\r\n                            <p className=\"lead text-center fs-3\">\r\n                                Квартиры, отели, гостевые дома — 280 тысяч вариантов для поездок по России и зарубежью\r\n                            </p>\r\n                            <br />\r\n                            <div className=\"input-group mb-5 flex-auto\" style={{ width: 950, margin: \"auto\" }}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control form-control-lg input-font-size-lg\"\r\n                                    placeholder=\"Курорт, город или адрес\"\r\n                                    aria-label=\"Курорт, город или адрес\"\r\n                                    aria-describedby=\"button-addon2\"\r\n                                    id=\"input_search_location\"\r\n                                />\r\n                                <input\r\n                                    type=\"date\"\r\n                                    className=\"form-control form-control-lg input-font-size-lg\"\r\n                                    aria-label=\"Дата заселения\"\r\n                                    aria-describedby=\"button-addon2\"\r\n                                    id=\"input_search_datetime_check-in\"\r\n                                />\r\n                                <input\r\n                                    type=\"date\"\r\n                                    className=\"form-control form-control-lg input-font-size-lg\"\r\n                                    aria-label=\"Дата отъезда\"\r\n                                    aria-describedby=\"button-addon2\"\r\n                                    id=\"input_search_datetime_departure\"\r\n                                />\r\n                                <button className=\"btn btn-danger\" type=\"button\" id=\"button-addon2\" onClick={RunSearch}>\r\n                                    Найти...\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n                {loading && <p>Загрузка...</p>}\r\n                {error && <p className=\"text-danger\">{error}</p>}\r\n                {!loading && !error && (\r\n                    <span className=\"h4\">\r\n                        {searchData.length > 0 ? (\r\n                            <>\r\n                                Найдено совпадений: {searchData.length} <br />\r\n                                По запросу: \"{inputData}\" <br />\r\n                                {searchData.map((item) => (\r\n                                    <p key={item.id}>\r\n                                        <BriefItemCard item={item} />\r\n                                    </p>\r\n                                ))}\r\n                            </>\r\n                        ) : isStartSearch ? (\r\n                            `По указанным параметрам поиска: \"${inputData}\" - данных не найдено!`\r\n                        ) : (\r\n                            \"\"\r\n                        )}\r\n                    </span>\r\n                )}\r\n            </div>\r\n            <Footer />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}