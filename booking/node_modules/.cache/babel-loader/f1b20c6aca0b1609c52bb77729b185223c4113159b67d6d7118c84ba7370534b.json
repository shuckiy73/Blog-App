{"ast":null,"code":"var _jsxFileName = \"K:\\\\ARENDA\\\\Booking_arenda\\\\booking\\\\src\\\\Components\\\\Search\\\\Booking.jsx\",\n  _s = $RefreshSig$();\nimport React, { Component, useState, useEffect, Link } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport CustomDatepicker from \"./CustomDatepicker\";\nimport axios from \"axios\";\nimport { Button } from '@mui/material';\nimport Error from \"../General page/Error\";\nimport Alert from \"@mui/material/Alert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Booking = props => {\n  _s();\n  const [startD, setStartD] = useState();\n  const [endD, setEndD] = useState();\n  const [exchangeUSD, setExchangeUSD] = useState(0);\n  const [username, setUsername] = useState(\"\");\n  const [user_id, setUserId] = useState(null);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const API_BOOKING = \"http://127.0.0.1:8000/api/v1/booking/1\";\n  const API_NBRB_USD_CURRENCY = \"https://api.nbrb.by/exrates/rates/431\";\n  const API_REFRESH = \"http://127.0.0.1:8000/api/v1/auth/token/refresh/\";\n  const API_VERIFY = \"http://127.0.0.1:8000/api/v1/auth/token/verify/\";\n  const API_FAVORITE = \"http://127.0.0.1:8000/api/v1/add_to_favorite\";\n  const HEADERS = {\n    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7'\n  };\n  const startDate = document.getElementById('startDate');\n  const endDate = document.getElementById('endDate');\n  const favoritesListen = document.getElementById('favorites');\n  // if (favoritesListen) {\n  //     favoritesListen.addEventListener('favorite', function (event) {\n  //         console.log('Произошло событие favorite', event.type)\n  //     });\n  // }\n  const [days, setDays] = useState(1);\n  useEffect(() => {\n    if (startDate && endDate) {\n      startDate.addEventListener('change', function (event) {\n        console.log('Произошло событие', event.type);\n        var today = new Date().toISOString().split('T')[0];\n        startDate.setAttribute('value', today);\n        setStartD(startDate.value.toDateString);\n        setDays(endDate - startDate);\n      });\n      endDate.addEventListener('change', function (event) {\n        console.log('Произошло событие', event.type);\n        setEndD(endDate.value.toDateString);\n        setDays(endDate - startDate);\n      });\n      console.log(\"days\", days);\n    }\n    setDays(endDate - startDate);\n    console.log(\"days\", days);\n  }, [startDate, endDate, days]);\n  function parseJwt(token) {\n    if (!token) {\n      return \"Нету токена\";\n    }\n    var base64Url = token.split('.')[1];\n    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n    return JSON.parse(jsonPayload);\n  }\n  async function reset_tokens(refresh_token) {\n    console.log(\"tokens_REFRESH\", refresh_token);\n    let response = await fetch(API_REFRESH, {\n      method: \"POST\",\n      body: JSON.stringify({\n        refresh: refresh_token\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\"\n        // \"Authorization\": `Bearer ${JSON.stringify(tokens.access)}`\n        // 'Cache-Control': 'no-cache',\n      }\n    });\n    if (response.ok) {\n      console.log(\"REFRESH\", response.ok);\n      sessionStorage.removeItem(\"auth_token\");\n      let tk = await response.json();\n      tk[\"refresh\"] = refresh_token;\n      console.log(\"tk_REFRESH___\", tk);\n      sessionStorage.setItem(\"auth_token\", JSON.stringify(tk));\n    } else {\n      console.log(\"REFRESH\", response);\n      sessionStorage.removeItem(\"auth_token\");\n      console.log(\"Нужна повторная авторизация\");\n      alert(\"Для запроса нужна повторная авторизация\");\n    }\n  }\n  async function verify_token(ta, tr) {\n    console.log(\"tokens_VERIFY\", ta);\n    let response = await fetch(API_VERIFY, {\n      method: \"POST\",\n      body: JSON.stringify({\n        token: ta\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\"\n        // \"Authorization\": `Bearer ${tokens.access}`\n        // 'Cache-Control': 'no-cache',\n      }\n    });\n    if (response.ok) {\n      console.log('TOKENS IS VALID');\n      return true;\n    } else {\n      console.log('TOKENS IS NOT VALID');\n      reset_tokens(tr);\n      console.log('TOKENS IS UPDATE');\n      return false;\n    }\n  }\n  useEffect(() => {\n    const ExchangeUsd = async () => {\n      let response = await fetch(API_NBRB_USD_CURRENCY, {\n        method: \"GET\",\n        headers: HEADERS\n      });\n      if (response.ok) {\n        // если HTTP-статус в диапазоне 200-299\n        // получаем тело ответа (см. про этот метод ниже)\n        let json = await response.json();\n        setExchangeUSD(json.Cur_OfficialRate);\n      } else {\n        console.log(\"Ошибка HTTP: \" + response.status);\n      }\n    };\n    let result = ExchangeUsd();\n    if (sessionStorage.getItem(\"auth_token\")) {\n      // let tokens = JSON.parse(sessionStorage.getItem(\"auth_token\"));\n      let tokens = JSON.parse(sessionStorage.getItem(\"auth_token\"));\n      let user = parseJwt(tokens.refresh).username;\n      let user_id = parseJwt(tokens.refresh).user_id;\n      setUsername(user);\n      setUserId(user_id);\n    } else {\n      console.log(\"NO TOKENS\", sessionStorage);\n    }\n  }, []);\n  const getDate = () => {\n    let objectDT = new Date();\n    let day = objectDT.getDate();\n    let month = objectDT.getMonth() + 1;\n    let year = objectDT.getFullYear();\n    // return`${month}/${day}/${year}`;\n    // return `${year}-${month}-${day}`;\n    return `${day}-${month}-${year}`;\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setError(false);\n    setSuccess(false);\n    const arrive = await document.getElementById(\"startDate\").value;\n    const departure = await document.getElementById(\"endDate\").value;\n    if (sessionStorage.getItem(\"auth_token\")) {\n      var tk = JSON.parse(sessionStorage.getItem(\"auth_token\"));\n      console.log(\"tokens_REQUESTS\", tk.refresh);\n      let isValid = await verify_token(tk.access, tk.refresh);\n      if (!isValid) {\n        var tk = JSON.parse(sessionStorage.getItem(\"auth_token\"));\n        console.log(\"tk.access, tk.refresh\", tk.access, tk.refresh);\n      }\n    } else {\n      var tk = {\n        access: 'false',\n        refresh: 'false'\n      };\n    }\n    let response = await fetch(API_BOOKING, {\n      method: \"POST\",\n      body: JSON.stringify({\n        id: props.id,\n        arrive: arrive,\n        departure: departure,\n        tenant: user_id\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"*/*\",\n        \"Authorization\": `Bearer ${tk.access}`\n\n        // 'Cache-Control': 'no-cache',\n      }\n    });\n    if (response.ok) {\n      const data = await response.json();\n      console.log(\"data_success_Success\", data);\n      setSuccess(data);\n    } else {\n      let error = await response.json();\n      console.log(\"data_success_Error\", error.error);\n      setError(error);\n    }\n  };\n  useEffect(() => {\n    console.log('error_useEffect', error);\n    console.log('success_useEffect', success);\n    setError(error);\n    setSuccess(success);\n  }, [error, success]);\n  const handleFavorite = async event => {\n    if (sessionStorage.getItem(\"auth_token\")) {\n      // let tokens = JSON.parse(sessionStorage.getItem(\"auth_token\"));\n      let tokens = JSON.parse(sessionStorage.getItem(\"auth_token\"));\n      let user = parseJwt(tokens.refresh).username;\n      let user_id = parseJwt(tokens.refresh).user_id;\n      setUsername(user);\n      setUserId(user_id);\n      let response = await fetch(API_FAVORITE, {\n        method: \"POST\",\n        body: JSON.stringify({\n          user: user_id,\n          room_object: props.room_object\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"*/*\"\n          // \"Authorization\": `Bearer ${tk.access}`\n\n          // 'Cache-Control': 'no-cache',\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"data_success_favorite\", data);\n        setSuccess(data);\n      } else {\n        let error = await response.json();\n        console.log(\"data_error_favorite\", error.error);\n        setError(error);\n      }\n      console.log('____ERRROR____', error);\n    } else {\n      console.log(\"NO TOKENS/ need auth\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"position-fixed \",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              id: \"favorite\",\n              variant: \"outlined\",\n              color: \"success\",\n              onClick: handleFavorite,\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"16\",\n                height: \"16\",\n                fill: \"currentColor\",\n                className: \"bi bi-suit-heart\",\n                viewBox: \"0 0 16 16\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595L8 6.236zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.55 7.55 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 33\n              }, this), \"\\xA0\\u0412 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0435\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col \",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              id: \"shared\",\n              variant: \"outlined\",\n              color: \"success\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"16\",\n                height: \"16\",\n                fill: \"currentColor\",\n                className: \"bi bi-share\",\n                viewBox: \"0 0 16 16\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 33\n              }, this), \"\\xA0\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        method: \"POST\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container shadow-lg  rounded-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"startDate\",\n                className: \"pa__middle-input text form-control\",\n                type: \"date\",\n                placeholder: \"\\u0417\\u0430\\u0435\\u0437\\u0434\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"endDate\",\n                className: \"form-control\",\n                type: \"date\",\n                placeholder: \"\\u041E\\u0442\\u044A\\u0435\\u0437\\u0434\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u041F\\u0440\\u0435\\u0434\\u043E\\u043F\\u043B\\u0430\\u0442\\u0430: \", props.prepayment, \" BYN (~\", (props.prepayment / exchangeUSD).toFixed(2), \" USD)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u0437\\u0430 \\u0441\\u0443\\u0442\\u043A\\u0438:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 28\n            }, this), \" \", props.payment_day, \" BYN (~\", (props.payment_day / exchangeUSD).toFixed(2), \" USD)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u043F\\u0440\\u0438 \\u0437\\u0430\\u0441\\u0435\\u043B\\u0435\\u043D\\u0438\\u0438: \", props.payment_day - props.prepayment, \" BYN (~\", ((props.payment_day - props.prepayment) / exchangeUSD).toFixed(2), \" USD)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u041A\\u0443\\u0440\\u0441 \\u041D\\u0411 \\u0420\\u0411 \\u043D\\u0430 \", getDate(), \": 1 USD - \", exchangeUSD, \" BYN\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row \",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              variant: \"outlined\",\n              color: \"success\",\n              children: \"\\u0425\\u043E\\u0447\\u0443 \\u0437\\u0430\\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }, this), error ? /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        children: [error.error, error.detail]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 25\n      }, this) : success ? /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        children: success.success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 29\n      }, this) : \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 302,\n    columnNumber: 9\n  }, this);\n};\n_s(Booking, \"tz3ZcxL0emzEUykYXjwkQ1LDqPE=\");\n_c = Booking;\nexport default Booking;\nvar _c;\n$RefreshReg$(_c, \"Booking\");","map":{"version":3,"names":["React","Component","useState","useEffect","Link","DatePicker","CustomDatepicker","axios","Button","Error","Alert","jsxDEV","_jsxDEV","Booking","props","_s","startD","setStartD","endD","setEndD","exchangeUSD","setExchangeUSD","username","setUsername","user_id","setUserId","error","setError","success","setSuccess","API_BOOKING","API_NBRB_USD_CURRENCY","API_REFRESH","API_VERIFY","API_FAVORITE","HEADERS","startDate","document","getElementById","endDate","favoritesListen","days","setDays","addEventListener","event","console","log","type","today","Date","toISOString","split","setAttribute","value","toDateString","parseJwt","token","base64Url","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","reset_tokens","refresh_token","response","fetch","method","body","stringify","refresh","headers","ok","sessionStorage","removeItem","tk","json","setItem","alert","verify_token","ta","tr","ExchangeUsd","Cur_OfficialRate","status","result","getItem","tokens","user","getDate","objectDT","day","month","getMonth","year","getFullYear","handleSubmit","preventDefault","arrive","departure","isValid","access","id","tenant","data","handleFavorite","room_object","className","children","class","variant","color","onClick","xmlns","width","height","fill","viewBox","d","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","prepayment","toFixed","payment_day","severity","detail","_c","$RefreshReg$"],"sources":["K:/ARENDA/Booking_arenda/booking/src/Components/Search/Booking.jsx"],"sourcesContent":["import React, {Component, useState, useEffect, Link} from \"react\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport CustomDatepicker from \"./CustomDatepicker\";\r\nimport axios from \"axios\";\r\nimport {Button} from '@mui/material'\r\nimport Error from \"../General page/Error\";\r\nimport Alert from \"@mui/material/Alert\";\r\n\r\nconst Booking = (props) => {\r\n\r\n    const [startD, setStartD] = useState();\r\n    const [endD, setEndD] = useState();\r\n    const [exchangeUSD, setExchangeUSD] = useState(0);\r\n    const [username, setUsername] = useState(\"\");\r\n    const [user_id, setUserId] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [success, setSuccess] = useState(false);\r\n    const API_BOOKING = \"http://127.0.0.1:8000/api/v1/booking/1\"\r\n    const API_NBRB_USD_CURRENCY = \"https://api.nbrb.by/exrates/rates/431\"\r\n    const API_REFRESH = \"http://127.0.0.1:8000/api/v1/auth/token/refresh/\";\r\n    const API_VERIFY = \"http://127.0.0.1:8000/api/v1/auth/token/verify/\";\r\n    const API_FAVORITE = \"http://127.0.0.1:8000/api/v1/add_to_favorite\"\r\n\r\n\r\n    const HEADERS = {\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',\r\n    };\r\n    const startDate = document.getElementById('startDate')\r\n    const endDate = document.getElementById('endDate')\r\n    const favoritesListen = document.getElementById('favorites');\r\n    // if (favoritesListen) {\r\n    //     favoritesListen.addEventListener('favorite', function (event) {\r\n    //         console.log('Произошло событие favorite', event.type)\r\n    //     });\r\n    // }\r\n    const [days, setDays] = useState(1);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if (startDate && endDate) {\r\n            startDate.addEventListener('change', function (event) {\r\n                console.log('Произошло событие', event.type)\r\n                var today = new Date().toISOString().split('T')[0];\r\n                startDate.setAttribute('value', today)\r\n                setStartD(startDate.value.toDateString)\r\n                setDays(endDate - startDate)\r\n            })\r\n            endDate.addEventListener('change', function (event) {\r\n                    console.log('Произошло событие', event.type)\r\n                    setEndD(endDate.value.toDateString)\r\n                    setDays(endDate - startDate)\r\n                }\r\n            );\r\n\r\n            console.log(\"days\", days)\r\n\r\n        }\r\n\r\n\r\n        setDays(endDate - startDate)\r\n        console.log(\"days\", days)\r\n    }, [startDate, endDate, days])\r\n\r\n\r\n    function parseJwt(token) {\r\n        if (!token) {\r\n            return \"Нету токена\";\r\n        }\r\n        var base64Url = token.split('.')[1];\r\n        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n        var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\r\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n        }).join(''));\r\n        return JSON.parse(jsonPayload);\r\n    }\r\n\r\n    async function reset_tokens(refresh_token) {\r\n        console.log(\"tokens_REFRESH\", refresh_token)\r\n        let response = await fetch(\r\n            API_REFRESH,\r\n            {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    refresh: refresh_token,\r\n                }),\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Accept\": \"*/*\",\r\n                    // \"Authorization\": `Bearer ${JSON.stringify(tokens.access)}`\r\n                    // 'Cache-Control': 'no-cache',\r\n                },\r\n            }\r\n        );\r\n\r\n        if (response.ok) {\r\n            console.log(\"REFRESH\", response.ok);\r\n            sessionStorage.removeItem(\"auth_token\");\r\n            let tk = await response.json();\r\n            tk[\"refresh\"] = refresh_token;\r\n            console.log(\"tk_REFRESH___\", tk)\r\n            sessionStorage.setItem(\"auth_token\", JSON.stringify(tk));\r\n        } else {\r\n            console.log(\"REFRESH\", response);\r\n            sessionStorage.removeItem(\"auth_token\");\r\n            console.log(\"Нужна повторная авторизация\")\r\n            alert(\"Для запроса нужна повторная авторизация\")\r\n\r\n        }\r\n    }\r\n\r\n    async function verify_token(ta, tr) {\r\n        console.log(\"tokens_VERIFY\", ta)\r\n        let response = await fetch(\r\n            API_VERIFY,\r\n            {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    token: ta,\r\n                }),\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Accept\": \"*/*\",\r\n                    // \"Authorization\": `Bearer ${tokens.access}`\r\n                    // 'Cache-Control': 'no-cache',\r\n                },\r\n            }\r\n        );\r\n\r\n        if (response.ok) {\r\n            console.log('TOKENS IS VALID')\r\n            return true\r\n        } else {\r\n            console.log('TOKENS IS NOT VALID')\r\n            reset_tokens(tr)\r\n            console.log('TOKENS IS UPDATE')\r\n            return false\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n\r\n            const ExchangeUsd = async () => {\r\n                let response = await fetch(API_NBRB_USD_CURRENCY, {method: \"GET\", headers: HEADERS});\r\n\r\n                if (response.ok) { // если HTTP-статус в диапазоне 200-299\r\n                    // получаем тело ответа (см. про этот метод ниже)\r\n                    let json = await response.json();\r\n\r\n                    setExchangeUSD(json.Cur_OfficialRate);\r\n                } else {\r\n                    console.log(\"Ошибка HTTP: \" + response.status);\r\n                }\r\n            };\r\n\r\n            let result = ExchangeUsd()\r\n\r\n            if (sessionStorage.getItem(\"auth_token\")) {\r\n                // let tokens = JSON.parse(sessionStorage.getItem(\"auth_token\"));\r\n                let tokens = JSON.parse(sessionStorage.getItem(\"auth_token\"));\r\n                let user = parseJwt(tokens.refresh).username;\r\n                let user_id = parseJwt(tokens.refresh).user_id;\r\n                setUsername(user);\r\n                setUserId(user_id)\r\n            } else {\r\n                console.log(\"NO TOKENS\", sessionStorage);\r\n            }\r\n\r\n\r\n        },\r\n        []\r\n    )\r\n\r\n    const getDate = () => {\r\n\r\n        let objectDT = new Date();\r\n        let day = objectDT.getDate();\r\n        let month = objectDT.getMonth() + 1;\r\n        let year = objectDT.getFullYear();\r\n        // return`${month}/${day}/${year}`;\r\n        // return `${year}-${month}-${day}`;\r\n        return `${day}-${month}-${year}`;\r\n\r\n    };\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        setError(false)\r\n        setSuccess(false)\r\n        const arrive = await document.getElementById(\"startDate\").value;\r\n        const departure = await document.getElementById(\"endDate\").value;\r\n        if (sessionStorage.getItem(\"auth_token\")) {\r\n            var tk = JSON.parse(sessionStorage.getItem(\"auth_token\"));\r\n            console.log(\"tokens_REQUESTS\", tk.refresh)\r\n\r\n            let isValid = await verify_token(tk.access, tk.refresh);\r\n\r\n            if (!isValid) {\r\n                var tk = JSON.parse(sessionStorage.getItem(\"auth_token\"));\r\n                console.log(\"tk.access, tk.refresh\", tk.access, tk.refresh);\r\n            }\r\n        } else {\r\n            var tk = {\r\n                access: 'false',\r\n                refresh: 'false'\r\n            }\r\n        }\r\n\r\n\r\n        let response = await fetch(\r\n            API_BOOKING,\r\n            {\r\n                method: \"POST\",\r\n                body: JSON.stringify({\r\n                    id: props.id,\r\n                    arrive: arrive,\r\n                    departure: departure,\r\n                    tenant: user_id\r\n                })\r\n                ,\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Accept\": \"*/*\",\r\n                    \"Authorization\": `Bearer ${tk.access}`\r\n\r\n                    // 'Cache-Control': 'no-cache',\r\n                },\r\n            }\r\n        );\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            console.log(\"data_success_Success\", data)\r\n            setSuccess(data)\r\n        } else {\r\n            let error = await response.json();\r\n            console.log(\"data_success_Error\", error.error);\r\n            setError(error)\r\n        }\r\n\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        console.log('error_useEffect', error)\r\n        console.log('success_useEffect', success)\r\n        setError(error)\r\n        setSuccess(success)\r\n\r\n    }, [error, success])\r\n\r\n    const handleFavorite = async (event) => {\r\n\r\n\r\n        if (sessionStorage.getItem(\"auth_token\")) {\r\n            // let tokens = JSON.parse(sessionStorage.getItem(\"auth_token\"));\r\n            let tokens = JSON.parse(sessionStorage.getItem(\"auth_token\"));\r\n            let user = parseJwt(tokens.refresh).username;\r\n            let user_id = parseJwt(tokens.refresh).user_id;\r\n            setUsername(user);\r\n            setUserId(user_id)\r\n\r\n\r\n            let response = await fetch(\r\n                API_FAVORITE,\r\n                {\r\n                    method: \"POST\",\r\n                    body: JSON.stringify({\r\n                        user: user_id,\r\n                        room_object: props.room_object\r\n                    })\r\n                    ,\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"Accept\": \"*/*\",\r\n                        // \"Authorization\": `Bearer ${tk.access}`\r\n\r\n                        // 'Cache-Control': 'no-cache',\r\n                    },\r\n                }\r\n            )\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                console.log(\"data_success_favorite\", data)\r\n                setSuccess(data)\r\n            } else {\r\n                let error = await response.json();\r\n                console.log(\"data_error_favorite\", error.error);\r\n                setError(error)\r\n            }\r\n\r\n            console.log('____ERRROR____', error)\r\n        } else {\r\n            console.log(\"NO TOKENS/ need auth\",);\r\n        }\r\n\r\n\r\n    };\r\n\r\n    return (\r\n        <div className=\"position-fixed \">\r\n            <div className=\"container-fluid \">\r\n                <div class=\"container \">\r\n                    <div className=\"row\">\r\n                        <div className=\"col\">\r\n\r\n                            <Button id=\"favorite\" variant=\"outlined\" color=\"success\" onClick={handleFavorite}>\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\r\n                                     className=\"bi bi-suit-heart\" viewBox=\"0 0 16 16\">\r\n                                    <path\r\n                                        d=\"m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595L8 6.236zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.55 7.55 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z\"/>\r\n                                </svg>\r\n                                &nbsp;В избранное\r\n                            </Button>\r\n                        </div>\r\n                        <div className=\"col \">\r\n                            <Button id=\"shared\" variant=\"outlined\" color=\"success\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\r\n                                     className=\"bi bi-share\" viewBox=\"0 0 16 16\">\r\n                                    <path\r\n                                        d=\"M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z\"/>\r\n                                </svg>\r\n                                &nbsp;Поделиться\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br/>\r\n                <form method=\"POST\" onSubmit={handleSubmit}>\r\n                    <div className=\"container shadow-lg  rounded-5\">\r\n                        <br/>\r\n                        {/*<DatePicker/>*/}\r\n\r\n                        <div className=\"row\">\r\n                            <div className=\"col\">\r\n                                {/*<CustomDatepicker/>*/}\r\n                                <input id=\"startDate\" className=\"pa__middle-input text form-control\" type=\"date\"\r\n                                       placeholder=\"Заезд\"/>\r\n                            </div>\r\n                            <div className=\"col\">\r\n                                {/*<CustomDatepicker/>*/}\r\n                                <input id=\"endDate\" className=\"form-control\" type=\"date\" placeholder=\"Отъезд\"/>\r\n                            </div>\r\n                        </div>\r\n                        <br/>\r\n                        <p>Предоплата: {props.prepayment} BYN (~{(props.prepayment / exchangeUSD).toFixed(2)} USD)</p>\r\n                        <p><span>Оплата за сутки:</span> {props.payment_day} BYN\r\n                            (~{(props.payment_day / exchangeUSD).toFixed(2)} USD)</p>\r\n\r\n                        <p>Оплата при заселении: {props.payment_day - props.prepayment} BYN\r\n                            (~{((props.payment_day - props.prepayment) / exchangeUSD).toFixed(2)} USD)</p>\r\n                        <hr/>\r\n                        <p>Курс НБ РБ на {getDate()}: 1 USD - {exchangeUSD} BYN</p>\r\n                        <br/>\r\n                        {/*<div className=\"position-fixed\">...</div>*/}\r\n                        <div className=\"row \">\r\n                            <Button type=\"submit\" variant=\"outlined\" color=\"success\">Хочу забронировать</Button>\r\n                        </div>\r\n                        <br/>\r\n                    </div>\r\n                </form>\r\n                <br/>\r\n                {\r\n                    error ?\r\n                        <Alert severity=\"error\">{error.error}{error.detail}</Alert> : success ?\r\n                            <Alert severity=\"success\">{success.success}</Alert> : \"\"\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n};\r\n\r\nexport default Booking;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}